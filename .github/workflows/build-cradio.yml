# Copyright 2022 Manna Harbour
# https://github.com/manna-harbour/miryoku

name: 'Build cradio '
on: push
jobs:
  job_1:
    build:
      name: build cradio left firmware
      uses: ./.github/workflows/main.yml
      secrets: inherit
      with:
        board: '["nice_nano_v2"]'
        shield: '["cradio_left"]'
        custom_config: '["#define MIRYOKU_KLUDGE_MOUSEKEYSPR"]'
        kconfig: '["CONFIG_ZMK_MOUSE=y"]'
        branches: '["zmkfirmware/zmk/main ftc/zmk/mouse-ftc"]'
  job_2:
    build:
      name: build cradio right firmware
      needs: job_2
      uses: ./.github/workflows/main.yml
      secrets: inherit
      with:
        board: '["nice_nano_v2"]'
        shield: '["cradio_right"]'
        custom_config: '["#define MIRYOKU_KLUDGE_MOUSEKEYSPR"]'
        kconfig: '["CONFIG_ZMK_MOUSE=y"]'
        branches: '["zmkfirmware/zmk/main ftc/zmk/mouse-ftc"]'
  job_3:
      name: download cradio firmware
      runs-on: ubuntu-latest
      needs: job_2
      steps:
        uses: actions/download-artifact@v3

      # steps:
      # - uses: actions/checkout@v3
          
      # - uses: actions/download-artifact@v3
      #   with:
      #     name: my-artifact
              
      # - name: Display structure of downloaded files
      #   run: ls -R
